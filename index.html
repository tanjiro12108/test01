<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Knowlege Bot â€” Perplexity Style</title>
<style>
  :root{
    --bg:#f8fafc;
    --sidebar:#ffffff;
    --border:#e2e8f0;
    --text:#0f172a;
    --muted:#64748b;
    --accent:#2563eb;
  }
  body.dark{
    --bg:#0f172a;
    --sidebar:#1e293b;
    --border:#334155;
    --text:#f1f5f9;
    --muted:#94a3b8;
    --accent:#38bdf8;
  }
  *{box-sizing:border-box;margin:0;padding:0;font-family:Inter,system-ui,sans-serif;}
  body,html{height:100%;background:var(--bg);color:var(--text);
    transition: background 0.3s ease, color 0.3s ease;}
  .app{display:grid;grid-template-columns:260px 1fr;height:100vh;}
  /* Sidebar */
  .sidebar{
    background:var(--sidebar);
    border-right:1px solid var(--border);
    padding:20px;
    display:flex;flex-direction:column;gap:20px;
    transition: background 0.3s ease, border 0.3s ease;
  }
  .logo{font-weight:700;font-size:18px;color:var(--accent);}
  .links a{color:var(--accent);text-decoration:none;font-size:15px;margin-right:10px;}
  .links a:hover{text-decoration:underline;}
  .faq h4{font-size:14px;color:var(--muted);margin-bottom:6px;}
  .faq li{list-style:none;padding:6px 0;font-size:14px;cursor:pointer;color:var(--text);}
  .faq li:hover{color:var(--accent);}
  /* Chat area */
  .chat{display:flex;flex-direction:column;height:100%;overflow:hidden;}
  .chat-header{
    padding:14px 20px;
    border-bottom:1px solid var(--border);
    font-weight:600;
    display:flex;justify-content:space-between;align-items:center;
    transition: border 0.3s ease;
  }
  .messages{
    flex:1;overflow:auto;padding:20px 100px;
    display:flex;flex-direction:column;gap:22px;
  }
  .q,.a{padding:18px;border-radius:12px;background:var(--sidebar);border:1px solid var(--border);
    transition: background 0.3s ease, border 0.3s ease;}
  .q{font-weight:600;}
  .a{color:var(--text);font-size:15px;line-height:1.5;}
  /* Composer */
  .composer{
    padding:16px 20px;border-top:1px solid var(--border);
    background:var(--sidebar);display:flex;gap:10px;
    transition: background 0.3s ease, border 0.3s ease;
  }
  .composer input{
    flex:1;padding:14px 18px;border-radius:999px;border:1px solid var(--border);
    outline:none;font-size:15px;background:var(--bg);color:var(--text);
    transition: background 0.3s ease, color 0.3s ease, border 0.3s ease;
  }
  .composer button{
    padding:12px 20px;border-radius:999px;border:none;
    background:var(--accent);color:#fff;font-weight:600;font-size:14px;cursor:pointer;
    transition: background 0.3s ease;
  }
  .composer button:hover{opacity:0.9;}
  /* Toggle Switch */
  .switch {
    position: relative;
    display: inline-block;
    width: 50px;
    height: 26px;
  }
  .switch input {display: none;}
  .slider {
    position: absolute;
    cursor: pointer;
    top: 0; left: 0; right: 0; bottom: 0;
    background-color: var(--border);
    transition: .4s;
    border-radius: 34px;
  }
  .slider:before {
    position: absolute;
    content: "";
    height: 18px; width: 18px;
    left: 4px; bottom: 4px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
  }
  input:checked + .slider {
    background-color: var(--accent);
  }
  input:checked + .slider:before {
    transform: translateX(24px);
  }
  @media(max-width:800px){
    .app{grid-template-columns:1fr;}
    .sidebar{display:none;}
    .messages{padding:20px;}
  }
</style>
</head>
<body>
<div class="app">
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="logo">Knowlege Bot</div>
    <div class="links">
      <a href="signup.html">Signup</a><br>
      <a href="login.html">Login</a><br>
    </div>
    <div class="faq">
      <h4>FAQs</h4>
      <ul>
        <li>Admissions process</li>
        <li>Exam schedule</li>
        <li>Scholarships</li>
        <li>Placements</li>
      </ul>
    </div>
  </aside>
  <!-- Chat -->
  <div class="chat">
    <div class="chat-header">
      <span>Ask me anything about DTE Rajasthan</span>
      <label class="switch">
        <input type="checkbox" id="modeToggle">
        <span class="slider"></span>
      </label>
    </div>
    <div class="messages" id="messages">
      <div class="q">What is the eligibility for diploma admissions?</div>
      <div class="a">Eligibility usually requires passing 10th grade with minimum marks. Official notifications provide details each year.</div>
    </div>
    <div class="composer">
      <input id="chatInput" type="text" placeholder="Ask a question..."/>
      <button id="sendBtn">Send</button>
    </div>
  </div>
</div>
<script>
const input = document.getElementById('chatInput');
const btn = document.getElementById('sendBtn');
const messages = document.getElementById('messages');
const toggle = document.getElementById('modeToggle');
btn.addEventListener('click', async () => {
  const text = input.value.trim();
  if (!text) return;
  const q = document.createElement('div');
  q.className = 'q';
  q.textContent = text;
  messages.appendChild(q);
  messages.scrollTop = messages.scrollHeight;
  input.value = '';
  try {
    const response = await fetch('http://localhost:5000/ask', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({question: text})
    });
    const data = await response.json();
    const a = document.createElement('div');
    a.className = 'a';
    a.textContent = data.answer;
    messages.appendChild(a);
    messages.scrollTop = messages.scrollHeight;
  } catch (e) {
    const a = document.createElement('div');
    a.className = 'a';
    a.textContent = "Error contacting chatbot backend.";
    messages.appendChild(a);
    messages.scrollTop = messages.scrollHeight;
  }
});
input.addEventListener('keydown', e => { if (e.key === 'Enter') btn.click(); });
// Toggle dark mode with switch
toggle.addEventListener('change', () => {
  document.body.classList.toggle('dark', toggle.checked);
});
</script>
</body>
</html>
